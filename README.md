# LR2 BGA Filter

LR2 (Lunatic Rave 2) 用の DirectShow フィルターです。BGA の再生品質とパフォーマンスを改善することを目的としています。

## 特徴

- **高解像度動画の適切な処理**: 適切なダウンスケーリングにより画質とパフォーマンスを両立します。
- **その他の機能**:
  - 黒帯 (レターボックス) の自動検出・除去
  - 外部ウィンドウでのBGA表示機能
  - 輝度調整機能
  - 音声トラックの自動破棄

## 動作要件・設定 (重要)

本フィルターを正常に動作させるためには、**LAV Video Decoder** の導入と、以下の特殊な設定が必要です。

1. **LAV Video Decoder のインストール**
    - 本フィルターは LAV Video Decoder と組み合わせて使用することを前提としています。

2. **LAV Video Decoder の設定**
    - **主要なフォーマットの有効化**: ほぼ全ての Input Formats (H.264, HEVC, MPEG4等) を有効にしてください。
    - **出力色空間の制限 (Output Formats)**: **RGB32 のみをチェックし、他をすべて外してください。**
        - *理由*: LR2 本体は RGB24 入力しか受け付けません。LAV の出力を RGB32 に限定することで、「LAV (RGB32) -> [本フィルター] -> LR2 (RGB24)」という経路を意図的に成立させ、本フィルターが強制的に使用されるようにします。

3. **メリット値 (優先度) の設定**
    - 本フィルター (`LR2BGAFilter`) は **最も高い優先度 (Merit Value)** に設定されています。
    - **2番目に LAV Video Decoder** が来るように設定してください。
    - *注意*: この順序が守られないと、OS標準の `quartz.dll` 等が優先されてしまい、本フィルターが使用されない場合があります。（将来的に設定支援ツールを作成する可能性があります）

### 注意事項 (免責)

上記の設定（LAVの出力制限やメリット値の変更）は、32bit版のDirectShowを使用するシステム全体（他の動画プレイヤーなど）に影響を与える可能性があります。
DirectShow自体がレガシーな技術であり、現代の一般的な用途では影響は限定的と思われますが、ご了承の上で適用してください。

## 配布パッケージ構成

リリースパッケージは以下の構成となっています。

```text
/ (root)
├── LR2BGAFilter.ax   (フィルター本体)
├── register.bat      (登録用バッチ - 管理者権限で実行)
├── unregister.bat    (解除用バッチ)
├── register.ps1      (実処理スクリプト)
└── README.md         (本書)
```

## インストール方法

1. [Releases] ページから最新の ZIP をダウンロードします。
2. 任意のフォルダに解凍します。
3. `register.bat` を右クリックし、「管理者として実行」を選択します。

## ライセンス

[MIT License](LICENSE)
